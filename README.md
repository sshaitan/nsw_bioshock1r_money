# BioShock Remastered (Nintendo Switch) Money Save Editor

Небольшой скрипт на Python для правки количества денег в сохранениях
**BioShock (1) Remastered** на **Nintendo Switch**.

> ⚠️ Используйте на свой страх и риск. Всегда делайте бэкап сейвов.

## Что делает скрипт

* Читает файл `mainSave.bsg` из версии игры для Nintendo Switch.
* Разбирает внутреннюю структуру сохранения:
  * заголовок (0x44 байта),
  * последовательность zlib-блоков с проставленными между ними размерами.
* Находит в распакованных данных сигнатуру блока игрока, где хранится
  текущий баланс денег, и меняет это значение на указанное.
* Перепаковывает изменённый блок обратно в zlib, обновляет размер блока
  в заголовке и собирает новое сохранение.

Скрипт **не трогает** остальную структуру файла.

## Требования

* Python **3.8+** (проверено на Linux с Python 3.12).
* Никаких внешних библиотек не требуется — используются только модули стандартной библиотеки:
  `struct`, `zlib`, `pathlib`, `sys`.

## Как получить сейв

На взломанном Switch можно использовать, например, **DBI**:

1. Подключить консоль по USB.
2. В DBI открыть раздел с установленной игрой BioShock Remastered.
3. Слить файл сохранения `mainSave.bsg` на ПК.

Точный путь может отличаться в зависимости от настроек/версии DBI.

## Использование

1. Сделайте бэкап оригинального сейва:

   ```bash
   cp mainSave.bsg mainSave_backup.bsg
   ```

2. Положите `bioshock_money.py` рядом с `mainSave.bsg`.

3. Запустите скрипт:

   ```bash
   python3 bioshock_money.py mainSave.bsg 5000
   ```

   Где `5000` — желаемое количество денег.

4. Скрипт выведет примерно следующее:

   ```
   Нашёл деньги в блоках: [0]
   Текущие значения денег (по файлу): [279]
   Ставлю новое значение денег: 5000
   Готово, патч сохранён в: mainSave_money_5000.bsg
   ```

5. Полученный файл (например, `mainSave_money_5000.bsg`) переименуйте в `mainSave.bsg`
   и залейте обратно на Switch вместо старого сейва (бэкап не удаляйте).

6. Запустите игру и загрузите сохранение — в кошельке должно оказаться указанное
   количество долларов.

## Аргументы скрипта

```
bioshock_money.py ПУТЬ_К_СЕЙВУ НОВАЯ_СУММА [ВЫХОДНОЙ_ФАЙЛ]
```

* `ПУТЬ_К_СЕЙВУ` — путь до `mainSave.bsg`.
* `НОВАЯ_СУММА` — целое число (0 и выше).
* `ВЫХОДНОЙ_ФАЙЛ` (опционально) — имя выходного файла. Если не указано,
  скрипт создаст файл вида `mainSave_money_12345.bsg`.

## Ограничения и заметки

* Скрипт написан и протестирован на **Nintendo Switch версии BioShock Remastered**.
  На других платформах/версиях формат сохранений может отличаться.
* Внутри сейва деньги хранятся как 32-битное беззнаковое число (`uint32 LE`), поэтому
  технически можно задать очень большие значения. На практике разумнее ограничиться
  диапазоном до десятков тысяч, чтобы не нарваться на возможные переполнения
  в игровых структурах.
* Если структура сейва в будущих патчах игры изменится, скрипт может перестать
  находить сигнатуру и завершится с ошибкой — в таком случае потребуется
  дополнительный анализ нового формата.

## Лицензия

Можно использовать MIT, BSD, WTFPL или любую другую по вашему желанию.
